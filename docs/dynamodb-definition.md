# 🧾 DynamoDB テーブル定義書

## テーブル名
`Expenses`

---

## 主キー構成
| 項目名 | 種別 | 用途 |
|--------|------|------|
| **id** | string（Partition Key） | 一意識別子（UUID） |

※ソートキーなし。1件ごとに独立して管理。

---

## 属性定義
| 属性名 | 型 | 必須 | 説明 |
|---------|----|------|------|
| id | string | ✅ | UUID（自動生成） |
| category | string | ✅ | 家賃、水道代、家具などの支出種別 |
| payer | string | ✅ | 支払者（例：`me`, `partner`） |
| amount | number | ✅ | 金額（整数） |
| date | string | ✅ | 支払日（`YYYY-MM-DD` 形式） |
| settled | boolean | ✅ | 精算済みフラグ（true/false） |
| note | string | ⭕ | 備考メモ（任意） |

---

## セカンダリインデックス（拡張用メモ）
| 名称 | キー | 用途 |
|------|------|------|
| GSI1 | `settled` | 未精算データのみ取得したい場合 |
| GSI2 | `payer` | 支払者ごとの集計表示など |

※現時点では未作成。必要時に追加。

---

## 想定件数・スループット
| 項目 | 内容 |
|------|------|
| 想定登録件数 | 月 10～50 件 |
| 読み書き頻度 | 少（個人利用） |
| 課金モード | オンデマンド（Pay per request） |

---

## バックアップ・運用メモ
| 内容 | 方法 |
|------|------|
| バックアップ | DynamoDB オンデマンドバックアップ（手動） |
| ログ確認 | CloudWatch Logs から参照 |
| 削除注意 | データ削除＝完全消去。バックアップ後に実施。 |

---

## 今後の拡張アイデア
- 支払者ごとの残高自動計算 API
- カテゴリ別支出グラフ（QuickSight 連携）
- LINE 通知による精算リマインド
